---
layout: base
title: Eleventy Plugin Post Stats
---

Bacon ipsum dolor amet venison ribeye drumstick prosciutto, swine alcatra leberkas salami t-bone tri-tip biltong. Picanha tenderloin flank boudin, biltong drumstick strip steak shoulder. Sirloin ham pork chop t-bone, boudin sausage bacon pork loin short loin frankfurter. Tenderloin chislic pork loin, sirloin meatloaf pork chop venison. Prosciutto jerky porchetta capicola shoulder, andouille ground round chislic pig doner.<br/>

{% if collections.postStats.postCount > 0 %}
  <ul>
    <li>
      <strong>First post:</strong>
      {{ collections.postStats.firstPostDate }}
    </li>
    <li>
      <strong>Last post:</strong>
      {{ collections.postStats.lastPostDate }}
    </li>
    <li>
      <strong>Post count:</strong>
      {{ collections.postStats.postCount | commaize }}
    </li>
    <li>
      <strong>Average days between posts:</strong>
      {{ collections.postStats.avgDays | commaize }}
    </li>
    <li>
      <strong>Average characters per post:</strong>
      {{ collections.postStats.avgCharacterCount | commaize }}
    </li>
    <li>
      <strong>Average words per post:</strong>
      {{ collections.postStats.avgWordCount | commaize }}
    </li>
    <li>
      <strong>Average paragraphs per post:</strong>
      {{ collections.postStats.avgParagraphCount | commaize }}
    </li>
    {%- if collections.postStats.avgCodeBlockCount > 0 -%}
      <li>
        <strong>Average code blocks per post:</strong>
        {{ collections.postStats.avgCodeBlockCount | commaize }}
      </li>
    {% endif %}
  </ul>

  <style>
    table,
    th,
    td {
      border: 1px solid;
    }
    .chart-container {
      width: 1000px;
      height: 600px
    }
  </style>

  <h2>Yearly Statistics</h2>

  <table>
    <thead>
      <tr>
        <th>Year</th>
        <th>Post Count</th>
        <th>Avg. Days Between Posts&nbsp;</th>
        <th>Characters</th>
        <th>Words</th>
        <th>Paragraphs</th>
        {% if collections.postStats.avgCodeBlockCount > 0 %}
          <th>Code Blocks</th>
        {%- endif -%}
      </tr>
    </thead>
    <tbody>
      {% for year in collections.postStats.years %}
        <tr>
          <td>{{ year.year }}</td>
          <td>{{ year.postCount | commaize }}</td>
          <td>{{ year.avgDays | commaize }}</td>
          <td>{{ year.avgCharacterCount | commaize }}</td>
          <td>{{ year.avgParagraphCount | commaize }}</td>
          <td>{{ year.avgWordCount | commaize }}</td>
          {%- if collections.postStats.avgCodeBlockCount > 0 -%}
            <td>{{ year.avgCodeBlockCount | commaize }}</td>
          {%- endif -%}
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <h2>Post Stats</h2>
  <div class="chart-container">
    <canvas id="statsChart1"></canvas>
  </div>

  <h2>Content Stats</h2>
  <div class="chart-container">
    <canvas id="statsChart2"></canvas>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    const ctx = document.getElementById('statsChart1');
    new Chart(ctx, {
      data: {
        labels: [{% for year in collections.postStats.years %}'{{ year.year }}'{%- unless forloop.last %},{% endunless %}{% endfor %}],
      datasets: [
        {
          type: 'bar',
          label: 'Number of Posts',
          data: [{% for year in collections.postStats.years %}{{ year.postCount }}{%- unless forloop.last %},{% endunless %}{% endfor %}],
          borderWidth: 1,
          order: 1
        }, {
          type: 'line',
          label: 'Average Number of Days Between Posts',
          data: [{% for year in collections.postStats.years %}{{ year.avgDays }}{%- unless forloop.last %},{% endunless %}{% endfor %}],
          lineTension: 0.8,
          order: 2
        }
      ]
    },
    options: {
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });
  </script>

  <script>
    const ctx = document.getElementById('statsChart2');
    new Chart(ctx, {
      data: {
        labels: [{% for year in collections.postStats.years %}'{{ year.year }}'{%- unless forloop.last %},{% endunless %}{% endfor %}],
      datasets: [
        {
          type: 'line',
          label: 'Paragraphs per Post',
          data: [{% for year in collections.postStats.years %}{{ year.paragraphCount }}{%- unless forloop.last %},{% endunless %}{% endfor %}],
          borderWidth: 1,
          order: 1
        }, {
          type: 'line',
          label: 'Words per Post',
          data: [{% for year in collections.postStats.years %}{{ year.wordCount }}{%- unless forloop.last %},{% endunless %}{% endfor %}],
          borderWidth: 1,
          order: 2
        }, {
          type: 'line',
          label: 'Code Blocks per Post',
          data: [{% for year in collections.postStats.years %}{{ year.codeBlockCount }}{%- unless forloop.last %},{% endunless %}{% endfor %}],
          order: 3
        }
      ]
    },
    options: {
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });
  </script>

{% else %}
  <p>
    <strong>No data to display</strong>
  </p>

{% endif %}